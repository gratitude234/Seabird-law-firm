/* ------------------------------
   2b) Mobile slide-in panel — PREMIUM
------------------------------ */
.mobile-panel{
  position: fixed; inset: 0 0 0 auto;
  width: min(360px, 92vw);
  transform: translateX(100%) translateZ(0);
  background: linear-gradient(180deg, #0b1b2be6, #0e2845f0);
  color: #e8f0ff;
  border-left: 1px solid #ffffff1a;
  backdrop-filter: blur(12px) saturate(140%);
  -webkit-backdrop-filter: blur(12px) saturate(140%);
  box-shadow: -1px 0 0 #ffffff1a, 0 24px 60px #00000040;

  /* extra bottom padding so sticky actions never overlap links */
  padding: calc(60px + env(safe-area-inset-top)) 14px
           calc(108px + env(safe-area-inset-bottom));
  overflow: auto; z-index: 55;

  transition: transform .28s cubic-bezier(.2,.8,.4,1);
  -webkit-overflow-scrolling: touch;
}
.site-header.open + .mobile-panel { transform: translateX(0) }

/* Mini header inside panel */
.mobile-panel__head{
  position: sticky; top: 0; z-index: 1;
  display:flex; align-items:center; justify-content:space-between;
  margin:-46px -14px 12px; padding: 12px 14px;
  background: linear-gradient(180deg, rgba(14,40,69,.98), rgba(14,40,69,.92));
  border-bottom: 1px solid #ffffff14;
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}
.brand-mini{ display:flex; align-items:center; gap:.6rem; font-weight:800; letter-spacing:.2px; }
.brand-mini svg{ display:block; }

.close-btn{
  display:inline-grid; place-items:center;
  width:36px; height:36px; border-radius:12px;
  background: #ffffff10; color:#e8f0ff; border:1px solid #ffffff25;
  cursor:pointer; transition: transform .2s var(--ease), background .2s var(--ease);
  box-shadow: inset 0 1px 0 #ffffff22, 0 2px 12px #00000020;
}
.close-btn:active{ transform: translateY(1px) }
.close-btn:hover{ background:#ffffff18 }

/* Menu body */
.menu-scroll{ display:block; }
.menu-divider{
  margin: 14px 0; border: 0; height:1px;
  background: linear-gradient(90deg,transparent,#ffffff25,transparent);
}

/* Items: consistent left rail + big tap targets */
.menu-item,
.mobile-panel a,
.menu-accordion > summary{
  display:block; position:relative;
  padding: 14px 16px 14px 24px; /* left rail */
  min-height: 48px;
  border-radius: 14px;
  color:#e8f0ff; font-weight:800; font-size:16.5px; letter-spacing:.2px;
  text-decoration:none;
  transition: background .15s var(--ease), transform .15s var(--ease);
}
.menu-item:hover,
.mobile-panel a:hover,
.menu-accordion > summary:hover{ background:#ffffff10 }
.menu-item + .menu-item{ margin-top: 2px; }

.menu-item--quiet{
  font-weight:700; font-size:15px; letter-spacing:.2px;
  color:#d7e6ff; opacity:.95;
}

/* Accordion group: subtle “card” look */
.menu-accordion{
  border: 1px solid #ffffff1a; border-radius: 16px; overflow: hidden; margin-bottom: 10px;
  background: linear-gradient(180deg, #ffffff12, #ffffff08);
  box-shadow: inset 0 1px 0 #ffffff20;
}
.menu-accordion[open]{ border-color:#ffffff26; }
.menu-accordion > summary{
  list-style:none; display:flex; align-items:center; justify-content:space-between; gap: 10px;
  cursor:pointer;
}
.menu-accordion > summary::-webkit-details-marker{ display:none; }
.menu-accordion > summary:focus-visible{
  outline: 2px solid #bcd4ff; outline-offset: 2px; border-radius: 12px;
}
.menu-accordion .chev{
  inline-size: 10px; block-size: 10px;
  border-right:2px solid currentColor; border-bottom:2px solid currentColor;
  transform: rotate(45deg); transition: transform .2s var(--ease); opacity:.9;
}
.menu-accordion[open] .chev{ transform: rotate(225deg) }

.menu-accordion__body{ padding: 6px }
.menu-accordion__body .menu-link{
  display:block; padding: 12px 12px 12px 24px; border-radius: 12px;
  color:#e8f0ff; font-weight:700; text-decoration:none;
}
.menu-accordion__body .menu-link:hover{ background:#ffffff10 }

/* Sticky bottom actions (3 buttons) */
.menu-actions{
  position: fixed; left: 0; right: 0; bottom: 0; z-index: 56;
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
  padding: 10px; padding-bottom: calc(10px + env(safe-area-inset-bottom));
  background: linear-gradient(180deg, #0e2845db, #0e2845f7);
  border-top: 1px solid #ffffff20;
  box-shadow: 0 -12px 30px #00000030;
  transform: translateZ(0);
}
.menu-action{
  display:grid; place-items:center;
  height: 44px; border-radius: 14px;
  background: #ffffff12; border: 1px solid #ffffff2a;
  color:#e8f0ff; font-weight:800; font-size:15px; text-decoration:none;
  transition: transform .15s var(--ease), background .15s var(--ease);
}
.menu-action:active{ transform: translateY(1px) }
.menu-action--primary{
  background: linear-gradient(135deg, var(--brand), var(--brand-600));
  border-color: transparent; color: #fff;
}

/* Dim overlay when menu is open */
.overlay{
  position: fixed; inset: 0; z-index: 54;
  background: rgba(6,12,20,.45);
  opacity: 0; pointer-events: none;
  transition: opacity .25s ease;
}
.overlay[hidden]{ display:none; }
.site-header.open + .mobile-panel + .overlay,
#menuOverlay.show{ opacity: 1; pointer-events: auto; }

/* Stagger-in for items (class added by JS on open) */
.menu-scroll .menu-item,
.menu-accordion{ opacity: 0; transform: translateX(8px); }
.site-header.open ~ .mobile-menu .menu-item,
.site-header.open ~ .mobile-menu .menu-accordion{ animation: menuIn .28s cubic-bezier(.2,.8,.4,1) forwards; }
.site-header.open ~ .mobile-menu .menu-item:nth-child(1){ animation-delay: 40ms }
.site-header.open ~ .mobile-menu .menu-item:nth-child(2){ animation-delay: 65ms }
.site-header.open ~ .mobile-menu .menu-item:nth-child(3){ animation-delay: 90ms }
.site-header.open ~ .mobile-menu .menu-item:nth-child(4){ animation-delay: 115ms }
.site-header.open ~ .mobile-menu .menu-item:nth-child(5){ animation-delay: 140ms }
.site-header.open ~ .mobile-menu .menu-item:nth-child(6){ animation-delay: 165ms }
@keyframes menuIn{ to{ opacity:1; transform:none } }

/* Reduced motion: fade only */
@media (prefers-reduced-motion: reduce){
  .mobile-panel{ transition: opacity .15s linear; transform:none !important; }
  .site-header.open + .mobile-panel{ opacity:1 }
  .menu-scroll .menu-item, .menu-accordion{ opacity:1; transform:none; animation:none; }
}

/* Prevent body scroll when menu open (JS toggles .no-scroll) */
.no-scroll{ overflow:hidden; height:100dvh; }

/* Tighter overlay click area on very small screens */
@media (max-width:340px){
  .menu-item, .menu-accordion > summary{ padding-left:20px }
}
